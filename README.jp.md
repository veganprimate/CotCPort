# CotCPort
## **LANGUAGE:**  [English](README.md) | [日本語](README.jp.md) | [中文](README.zh.md) | [한국어](README.kr.md)

<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="50%">
      <img alt="1" src="https://github.com/user-attachments/assets/7de018fd-65fc-4fac-8da9-d877c3d1b3bf" width="100%" />
    </td>
    <td width="50%">
      <img alt="2" src="https://github.com/user-attachments/assets/35bbf069-f2ce-4ed9-b6d5-be0ec8975fa6" width="100%" />
    </td>
  </tr>
  <tr>
    <td width="50%">
      <img alt="3" src="https://github.com/user-attachments/assets/f52aab44-c6e9-41e2-8a5d-9e8ad82a9007" width="100%" />
    </td>
    <td width="50%">
      <img alt="4" src="https://github.com/user-attachments/assets/6370561a-3653-4dcb-a0e5-2ab82f787b1e" width="100%" />
    </td>
  </tr>
  <tr>
    <td colspan="2">
      <img alt="5" src="https://github.com/user-attachments/assets/b0943896-d810-4fbd-bf78-f6a7568541e0" width="100%" />
    </td>
  </tr>
</table>

『**オクトパストラベラー0**』向けのMODです。『**オクトパストラベラー 大陸の覇者**』（グローバル版／日本版／中国版）のコンテンツを、可能な限り『オクトパストラベラー0』へ移植することを目的としています。将来的には他の「オクトパストラベラー」作品の要素も取り込む可能性があります。  
※本READMEでは『大陸の覇者』にならい、キャラクターを「旅人」と表記します。

- 『大陸の覇者』の**旅人270人以上**を、**アビリティボード込み**で全員プレイ可能（**独自追加ユニット8体**：学者ノモス、フラ、ピエロ、フリート、ヒューゴ、ギメル、および『オクトパストラベラー』（第1作）のマティアス／ミゲル）
- **魔物闘技場**で、『大陸の覇者』由来の**新規ボス数百体**と戦闘可能
- 魔物闘技場の新たな敵を撃破することで、『大陸の覇者』由来の**新アクセサリー**や**装備**を数十種**解放**
- 『大陸の覇者』由来の**新規クエスト**を複数プレイ可能（キャラクターの**トラベラーストーリー**を含む）

本MODは現在、以下の言語に対応しています：
- **英語**
- **日本語**
- **韓国語**
- **中国語（簡体字）**
- **中国語（繁体字）**

![chargif](https://github.com/user-attachments/assets/00c35b82-3e9c-4810-8d8b-657f2c2a1151)

---

## 導入方法

**Releases** から、以下の3ファイルをダウンロードしてください。

- ファイル名末尾が `notex` のpak（`*_notex_p.pak`）：**データベース（DB）**ファイルを含みます
- `textures` pak（`*_textures_p.pak`）：『大陸の覇者』から移植した**テクスチャ／モデル**を含みます
- `RecruitEvent_p.pak`：本MODで追加された**旅人（270人以上）**の**加入イベント**を追加します（[新規旅人の加入方法](https://github.com/veganprimate/CotCPort/blob/main/README.jp.md#%E6%96%B0%E8%A6%8F%E6%97%85%E4%BA%BA%E3%81%AE%E5%8A%A0%E5%85%A5%E6%96%B9%E6%B3%95) 参照）。全旅人の加入後は削除して構いません。

これらのファイルはゲームの `Content\Paks` フォルダへ配置します。配置場所は、お使いの『**オクトパストラベラー0**』のバージョン／インストール形態によって異なります。

### Steam
3つのpakを `steamapps\common\Octopath_Traveler0\Octopath_Traveler0\Content\Paks` に配置してください。

### Microsoft Store
1. すべてのpakについて、ファイル名末尾のサフィックス `_p` を `_P` に変更してください
2. PCの **Xboxアプリ** を開き、左サイドバーのインストール済みゲーム一覧で **Octopath Traveler 0** を右クリックし、**管理** を選択
3. **ファイル** タブをクリック
4. **参照** をクリック
5. pakファイルを `<game install folder>\Octopath_Traveler0\Content\Paks\` に配置してください

### Switch（実機／Atmosphère）
pakを `<SD Card>\atmosphere\Contents\01005270232F2000\romfs\Octopath_Traveler0\Content\Paks` に配置してください。

### Switch（エミュレーター）
`romfs/Octopath_Traveler0/Content/Paks` のフォルダ構成でMODを作成し、3つのpakを `Paks` に配置してください。

---

## （任意）ハードモード版

本MODは `EnemyID` アセットをはじめ複数のアセットを変更しているため、同じアセットを編集する他のMODとは互換性がありません。併用したい方向けに、ファイル名に `_hard` サフィックスが付いたハードモード版を用意しました。

変更内容は以下の通りです（**(WIP)** と記された項目は未実装、または完全には実装されていません）。  
※この節は開発者向けメモを含み、内部キー名を併記しています。

- **通常敵**のHPが**2倍**、**ボス**のHPが**3倍**
- 通常敵の各種ステータス（物理攻撃力、物理防御力、属性攻撃力、属性防御力、速度、命中、会心、会心防御、最大シールド数）を**25%増**、ボスは**50%増**
- ボス撃破で得られる**EXP／JP／リーフ**を**20%増**
- **進行不能（ソフトロック）防止**のための個別調整（偽オルベリク、ウィッシュベール 第5章 蒼翠の大狼、枢機卿テラグラフ）
- **(WIP)** 一部の**敵・ボス**の**ステータス・スキル・戦術（AI）**を個別調整（現時点では主に**全てを授けし者**系ボスや、リソース吸収スキルを持つ一部のエンカウントに影響）
- **(WIP)** **超低確率のミニボス級エンカウント**を追加。キャットリン狩りをより危険なものにし、レアエネミー遭遇率を上げるアクセサリーやサポートアビリティに「副作用」を持たせる狙い。逃走しにくく、リソースをより積極的に削ってくるが、明確な攻略口（特定の状態異常や武器種による弱点）が存在
- **(WIP)** **プレイアブルキャラ**の**スキル／スキルセット**の調整：一部スキルのSP消費量、`Parry` の使用回数制限、（強力な）全体回復スキルの一部をディレイスキル化（暫定）
- **(WIP)** 個別の状態異常の挙動変更（物理回避は物理攻撃を行うと解除、属性回避は魔法攻撃を行うと解除し、より特化した運用を促す。前後列の切り替えで解除される効果も追加）
- 敵の火力増加に対応し、武器／属性耐性バフの活用や、より頻繁なメンバー入れ替えを促すため、全プレイアブルキャラ（本MODの追加分含む）に**武器種別・魔法種別ごとの耐性率**を設定しました。  
  _※参照配列に記載された値は「その武器／魔法種別による被ダメージの％」であり、値が高いほど被ダメージ増、低いほど被ダメージ減となります。_  
  本システムは **サガ（SaGa）** シリーズを参考にしています：
  - **物理耐性率**（`m_ResistWeapon`）：サガシリーズでは個々の武器カテゴリよりも、斬・突・打・射…のような**大まかな物理属性**が重視されます。一方『オクトパストラベラー0』では武器が8枠に分かれているため、サガ風の3属性を本作の武器種へ投影して数値を設定しています：
    - _**斬**寄り_：剣／斧／扇／短剣（やや）
    - _**突**寄り_：槍／短剣／弓
    - _**打**寄り_：杖／本／斧（ごくわずか）

     そのうえで、各ユニットの想定されるEND/VIT（耐久）対 AGI（敏捷）の傾向と、ジョブ（武器適性を反映）に応じて値を調整しています：
      - **高END/VITの「タンク」型** → 斬・打に低め（強め）、突に弱めの傾向（鎧の隙間・関節のイメージ）
      - **高AGIの「回避」型** → 突・遠隔（弓／短剣／槍）に低め（強め）だが、打には高め（避けにくい衝撃）になりやすい
      - **脆い術士・支援型** → 物理全般で高め（弱め）、特に突で「捕まると痛い」調整
      - 概ね、自身が**得意とする武器種**にはやや耐性あり（低め）、**対抗する属性側**の武器にはやや弱め（高め）に設定
  - **魔法耐性率**（`m_ResistMagic`）：主に想定されるWIL/SPR/MND的な資質をベースに、**属性の適性・弱点**（サガ各作品で実装は異なるが、主に『ロマンシング サ・ガ2』の魔法属性：熱／冷／電気／闇／状態…から着想）と、スキルセットから判断される**魔法適性**で形を整えています：
      - **高WIL・信仰系／聖職者タイプ** → 全属性でかなり低め（強め）。光に非常に強く闇に弱い傾向（マティアスのようなオカルト・闇寄りのタイプはその逆）
      - **高INTの魔術師タイプ** → 物理面では必ずしも硬くないが、特定属性への適性（高い耐性）と、別の属性への鋭い弱点を持ちうる
      - `m_ResistMagic` 配列の7番目（おそらく**毒**または**無属性**魔法ダメージ）は、概ね毒・状態への耐性（END/WIL寄り）として扱い、頑丈な体質や医療系は低め、脆い・闇寄り・盗賊系は高めに設定
  - **(WIP)** 将来的に可能であれば、**敵**や**装備**にも同様の**耐性率**を付与する予定です。狙いは、**ブレイク**をより希少にして**事前の綿密な計画**が必要になるようにし、代わりにブレイク以外の弱点を突けるようにすることです。結果として、**他のスタン手段**（エンチャント、麻痺、睡眠、場合によっては沈黙、恐怖、暗闇など）の活用や、ブレイクを狙うためのより専門的なパーティ編成の**促進**も意図しています
  - **(WIP)** **サガのLPに近い「戦闘不能の代償」**（消耗圧）：蘇生後に戦闘終了まで持続する「負傷」ステータス（最大HP・防御力などを低下）
  - **(WIP)** 戦闘中の**アイテム使用回数制限**（1戦あたり最大7回まで引き下げの可能性）。スキルや助っ人（ヘルパー）のより積極的な活用を促す（助っ人の枠数は増やす可能性あり）。現時点では特定のアイテムにのみ個別の使用回数制限あり
  - **(WIP)** より**特化した事前バフ**のための新しい料理（例：武器種別・魔法種別の攻撃力や耐性バフ、特定の状態異常付与、トレードオフ付きなど）
  - **(WIP)** 敵・ボスに**「先制行動」「優先行動」**を増やし、行動順操作や速度バフの重要性を引き上げ
  - **(WIP)** **対パターン化対策**：敵・ボスに**条件付きの迎撃**や**カウンター**バフを追加し、**単調な繰り返し戦法を抑制**。スキルのターゲット種もより専門化
  - **(WIP)** **ダンジョン設計**の軽微な変更（罠宝箱の追加など）
  - **(WIP)** **装備のトレードオフ**を増やしつつ、より**特化した有益効果**も追加（例：優秀な耐性率を持つ（重い）盾は速度と回避を低下させる、軽装備と重装備の違いをより強調…など）
  - **(WIP)** 全体回復の抑制：**単体回復**魔法を強化（ブースト時のパッシブバフ付与など）し、敵側にも**全体回復を咎める戦術**を持たせる（『オクトパストラベラー0』に「特定スキルの使用」を判定できる条件IDがあれば実装可能）
  - **(WIP)** 悪用されやすい消耗品の**価格を引き上げ**、（新規の）料理や新アイテムなど代替手段への移行を促す。**安価だが用途が狭い・特化型**の新アイテムも追加予定
  - **(WIP)** 将来的に**状態異常**を戦闘の**中核要素**にする予定。例：重ねがけで効果増大（暗闇I：-30% → 暗闇II：-50%）、ボスや遭遇がそれを前提に設計される（『ロマンシング サ・ガ2』序盤のように暗闇やスタンが生存に不可欠になる場面）、毒が「シールドを削る」という意味でのボスの弱点、通常スキルでの低確率状態異常付与など。バニラの『オクトパストラベラー0』はバフ・デバフに偏重した設計
  - **(WIP)** **状態異常スパム対策**：状態異常を有用に保ちつつスパムを防ぐため、ボスの完全耐性を減らす／付与確率を上げる代わりに、**成功するたびに当該状態異常への耐性がボスごとに一定割合（おそらく10〜30%）上昇する**仕組みを想定。状態異常付与を判定する条件IDが存在し、`SkillAvailID` には `m_ResistAilment` と `m_ResistAilmentID` のキーがあるため、十分に実装可能
  - **(WIP)** **BP溜め込み対策**：BPが多いキャラを狙うスキルを持つボスを増加（該当するターゲットタイプが存在）。BPが0のキャラのBP回復を阻害するなどの戦術も検討し、より積極的なBP消費を促す
  - **(WIP)** **バフ・デバフの過剰積み上げ対策**：パーティ側のバフや、自身にかかったデバフをチェックするボスを増加。※バフ・デバフを剥がすのではなく、ボスが別の行動で応じる設計（SP吸収、物理バフ中の味方に暗闇を狙う等）。入力読みのように感じさせず、対処手段も用意した上で、事前の計画性をより重視
  - **(WIP)** **必殺技**と**EXスキル**に（より厳しい）使用回数制限を設定（一部の**フルブースト**スキルも対象になる可能性あり）。**疲労メカニクス**（例：使用後に自己デバフ）によりこれらのスキルの使い所を計画的にし、連打を抑制
  - **(WIP)** **ディレイと割り込み**：ボス戦をディレイ・カウントダウン中心に設計し、味方・ボス双方に**割り込み手段**を追加（カウントダウン中のキャラを狙いカウント増加／行動をさらに遅延／スタン等）。その結果、（強力な）全体回復以外にもディレイ化されるスキルが増える見込み
  - **(WIP)** ブレイク特化、多段ヒット特化、状態異常付与特化など、**エンカウントの類型**を増加。HPやステータスを水増しするだけでなく、通常戦闘そのものを危険にする設計

---

## 新規旅人の加入方法

将来的には、各キャラクターのトラベラーストーリーが加入イベントとして機能する予定です。現時点で移植されているのは、プロメのトラベラーストーリーのみです。

当面は以下の手順で加入させてください：

<img width="1286" height="726" alt="12" src="https://github.com/user-attachments/assets/f06205a2-5c30-4a8f-8718-5ee69d84db95" />

1. `RecruitEvent_p.pak` が `Paks` フォルダに入っていることを確認してください
2. エンバーグロウにいるロングボウマスター（上画像参照）に話しかけてください。イベントが発生し、本MODで追加された全プレイアブルキャラクターが加入します

新しいアップデートで旅人が追加された場合も、`RecruitEvent_p.pak` が `Paks` フォルダに入っていれば、同じNPCに再度話しかけることで加入させられます。すでに加入済みの旅人の進行状況や装備がリセットされることはないようです。

---

## 開発への参加

このプロジェクトへの貢献はどなたでも歓迎します。本リポジトリにはpakのほか、MODの各要素の仕組みに関する詳細ドキュメント、『オクトパストラベラー0』の一般的なMOD制作ドキュメント、そして未完了タスクの一覧（進め方として有力なアプローチの簡潔な議論付き）が含まれています。

以下は、『**大陸の覇者**』から未移植の機能一覧です。各項目は、現在の進捗状況を説明する本リポジトリ内のmarkdownファイルにリンクしています：
- [~~クエストとイベント~~（解決済み）](QuestEvent_Prog_jp.md)
- [エフェクトとアニメーション](Animations_Prog_jp.md)
- [オブジェクト](Objects_Prog_jp.md)
- [マップ／エリア／レベル](Maps_Prog_jp.md)
- [効果音と音楽](Sound_Prog_jp.md)
- [『大陸の覇者』の完全新規機能・コードの移植](Custom_Prog_jp.md)

基本的な作業内容は、UE 4.27版『大陸の覇者』のアセットから可能な限りデータを抽出し、そのデータを元に『オクトパストラベラー0』向けのUnreal Engine 5.4アセットを新たに作成し、MODがそれらのアセットを正しく読み込むようにすることです。cooked済みのUE 4.27アセットをUE 5.4に汎用的に変換する手段が存在しないため、このような工程が必要になります。

### CotCPortをベースにしたMOD
前述の通り、このMODを自作MODのベースとして自由にお使いいただけます。ただし、**CotCPort** のバグ報告を一箇所に集約するため、このページへのリンクをお願いします。pakはファイル名のアルファベット順に上書き読み込みされるため、ご自身のMODのファイル名を適切に変更すれば、**CotCPort** の後に読み込ませることができます。

### チュートリアルとリソース
以下は、本MODの**チュートリアルおよびリソース**の一覧です。『大陸の覇者』から移植されたデータを使って独自MODを作成しやすくすることを目的としています。
- [本MODや『オクトパストラベラー0』のアセットを抽出・再pak化する方法](Begin_jp.md)
- [キャラクター・ジョブの追加・変更、および主人公の新カスタマイズオプションの追加方法](customchars_jp.md)
- [敵やバトルの追加・変更方法](customenms_jp.md)
- [クエスト・イベントの追加・変更方法（WIP）](customqsts_jp.md)
- [スキル・状態異常・Availの追加・変更方法（WIP）](customskls_jp.md)

---

## 連絡先
**BravelyPath Modular Discord** の **#cotc-characters-mod** チャンネルにて連絡可能です（他の貢献者やMOD制作者も参加しています）：  
https://discord.com/invite/t43Kbrp

---

## 謝辞
以下の方々に感謝します：
- **BoltGSR**・**MarvinCx886**：『大陸の覇者』日本版のデータを提供
- **Oersted**：『大陸の覇者』中国版のデータに加え、完全版スキルシート・スプライトシート、およびカスタムユニットのアイデアを提供
- **Vat**：キャラクターや敵の拡張スプライトシートの提供に加え、多くのテクスチャをクック（Cook）し、ゲーム内で非常に鮮明に表示されるよう調整
- **Solo Traveler**：多岐にわたる機能のプレイテストに協力し、ハードモード版のアイデアや、カスタムアリーナ戦の詳細な記述を提供
- **igoticecream**：『オクトパストラベラー0』向けのSDKを生成（頻繁に参照させていただきました）
- **MarvinCx886**：カスタムイベントの正しい実装方法を解明
- **MarvinCx886**・**JohnZ**：『大陸の覇者』からサウンドデータを移植する方法を解明し、その手順を詳細にまとめて公開
